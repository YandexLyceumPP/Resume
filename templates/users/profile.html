{% extends 'base.html' %}


{% block title %}–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å{% endblock %}

{% block content %}
    <h1>
        –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
        <a type="button" class="btn btn-outline-success" href="{% url 'users:detail' user.username %}">
            –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–æ–π –ø—Ä–æ—Ñ–∏–ª—å</a>
    </h1>

    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <div class="row">
        <!-- –¢–µ–ª–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
        <div>
            <!-- –ê–≤–∞—Ç–∞—Ä–∫–∞ -->
            <h3 id="list-img">–ê–≤–∞—Ç–∞—Ä–∫–∞</h3>
            {% if profile.image %}
                <div class="container">
                    <img src="{{ profile.get_image_avatar.url }}" alt="–ê–≤–∞—Ç–∞—Ä–∫–∞"
                         style="border-radius: 10px;">
                </div>
                <br>
            {% endif %}
            {% include 'core/include/form.html' with form=forms.image btn_text='–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å' buttons=None %}

            <hr>
            <!-- –û—Å–Ω–æ–≤–Ω–æ–µ -->
            <h3 id="list-basic">–û—Å–Ω–æ–≤–Ω–æ–µ</h3>
            {% include 'core/include/form.html' with form=forms.user btn_text='–ò–∑–º–µ–Ω–∏—Ç—å' %}

            <hr>
            <!-- –ù–∞–≤—ã–∫–∏ -->
            <h3 id="list-skills">–ù–∞–≤—ã–∫–∏</h3>
            <div class="mb-3">
                <form method="post">
                    {% csrf_token %}
                    <div class="mb-3">
                        <div class="form-group">
                            {{ forms.skill.skills.errors }}
                            <label for="exampleInputEmail1">
                                <label for="{{ forms.skill.skills.id_for_label }}" class="form-label">
                                    {{ forms.skill.skills.label }}
                                </label>
                                {% if forms.skill.skills.field.required %}<span>*</span>{% endif %}
                            </label>
                            <ul class="list-group">
                                {% for skill in forms.skill.skills %}
                                    <li class="list-group-item">
                                        {{ skill }}
                                    </li>
                                {% endfor %}
                            </ul>
                            <small id="emailHelp" class="form-text text-muted">
                                {{ field.help_text|safe }}</small>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </form>
            </div>

            <hr>
            <!-- –§–∞–∫—Ç—ã -->
            <h3 id="list-fields">
                –§–∞–∫—Ç—ã
                <a class="btn btn-outline-success" data-bs-toggle="collapse" href="#collapseField"
                   role="button" aria-expanded="false" aria-controls="collapseField">
                    –î–æ–±–∞–≤–∏—Ç—å
                </a>
            </h3>

            <div class="collapse" id="collapseField">
                <div class="card card-body">
                    {% include 'core/include/form.html' with form=forms.field btn_text='–î–æ–±–∞–≤–∏—Ç—å' buttons=None %}
                </div>
                <br>
            </div>
            <p>–¢—É—Ç –≤–∞–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –ø–æ–ª—è, –≥–¥–µ –≤—ã –Ω–∞–ø–∏—à–µ—Ç–µ –æ–±—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ–±–µ</p>

            <div class="accordion accordion-flush" id="accordionFields">
                {% for field in user_fields %}
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="heading{{ field.id }}">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapse{{ field.id }}" aria-expanded="false"
                                    aria-controls="collapse{{ field.id }}">
                                {{ field.title }}
                            </button>
                        </h2>
                        <div id="collapse{{ field.id }}" class="accordion-collapse collapse"
                             aria-labelledby="heading{{ field.id }}" data-bs-parent="#accordionFields">
                            <div class="accordion-body">
                                <a class="btn btn-warning" href="{% url 'workshop:field_update' field.id %}"
                                   role="button">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                                <a class="btn btn-danger" href="{% url 'workshop:field_delete' field.id %}"
                                   role="button">–£–¥–∞–ª–∏—Ç—å</a>
                                {{ field.value|safe }}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>

            <hr>
            <!-- –ö–æ–Ω—Ç–∞–∫—Ç—ã -->
            <h3 id="list-contacts">
                –ö–æ–Ω—Ç–∞–∫—Ç—ã
                <a class="btn btn-outline-success" data-bs-toggle="collapse" href="#collapseContacts"
                   role="button" aria-expanded="false" aria-controls="collapseContacts">
                    –î–æ–±–∞–≤–∏—Ç—å
                </a>
            </h3>

            <div class="collapse" id="collapseContacts">
                <div class="card card-body">
                    {% include 'core/include/form.html' with form=forms.contact btn_text='–î–æ–±–∞–≤–∏—Ç—å' buttons=None %}
                </div>
                <br>
            </div>

            <ul class="list-group">
                {% for contact in user_contacts %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        {{ contact.contact|urlizetrunc:40 }}
                        <a type="button" class="btn-close rounded-pill"
                           href="{% url 'workshop:contact_delete' contact.id %}" aria-label="Close"></a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ —Ä–µ–∑—é–º–µ -->
    <br>
    <h3>
        –í–∞—à–∏ —Ä–µ–∑—é–º–µ
        <a type="button" class="btn btn-success" href="{% url 'workshop:resume_create' %}">–°–æ–∑–¥–∞—Ç—å —Ä–µ–∑—é–º–µ</a>
    </h3>

    {% for resume in resumes %}
        {% include 'workshop/include/resume_card.html' with resume=resume %}
    {% empty %}
        <h4>–í—ã –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–∏–ª–∏ —Å–≤–æ–µ —Ä–µ–∑—é–º–µ üò®</h4>
    {% endfor %}
{% endblock %}